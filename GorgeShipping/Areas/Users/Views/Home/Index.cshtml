@using GorgeShipping.Models
@model IEnumerable<GorgeShipping.Models.User>


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <h2 class="text-info">Gorge Shipping</h2>
    <br />

    <div class="row" style="padding-top:10px">
      
        <div class="col-9">

            Find by Phone Number:
            <br />
            <div class="active-pink-3 active-pink-4 mb-4">
                <input class="form-control mr-sm-2" type="text" id="myInput" onkeyup="SearchFunction()" placeholder="Search for Phone Number.." aria-label="Search" />
            </div>
          
            <a asp-action="Index">Back to full List</a>
        </div>
    </div>
    <br />
    <div class="text-justify">
        <a asp-action="Create" class="btn btn-outline-info"> <i class="fas fa-user-plus"></i> &nbsp; New Contact</a>
    </div>

    <br /> <br />
    <div class="col-9">
        <table id="myTable" class="table table-striped border">
            <tr class="table-striped">
                <th>
                    @Html.DisplayNameFor(m => m.Name)
                </th>
                <th>
                    @Html.DisplayNameFor(m => m.Email)
                </th>
                <th>
                    @Html.DisplayNameFor(m => m.FirstOrDefault().TelephoneNumbers.FirstOrDefault().TelNumber).
                </th>

            </tr>

            @foreach (var user in Model)
            {
                <tr data-href="@Url.Action("Detail/"+user.id)">
                    <td>
                        @Html.DisplayFor(m => user.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(m => user.Email)
                    </td>
                    <td>
                        @Html.DisplayFor(m => user.TelDefault.TelNumber)
                    </td>
                    @*<td>
                        <a type="button" class="btn btn-primary" asp-controller="TelNumber" asp-action="Create" asp-route-id="@user.id">
                            <i class="fas fa-plus"></i>
                        </a>
                    </td>*@

                </tr>
            }
        </table>
    </div>

    <script>
        function SearchFunction() {
            var input, filter, table, tr, td, i, txtValue;

            input = document.getElementById("myInput");
            table = document.getElementById("myTable");

            filter = input.value.toUpperCase();

            tr = table.getElementsByTagName("tr");

            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[2];

                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
   
    <script>
    @*Clickable Table*@

        document.addEventListener("DOMContentLoaded", () => {
            const rows = document.querySelectorAll("tr[data-href]");

            rows.forEach(row => {
                row.addEventListener("click", () => {
                    window.location.href = row.dataset.href;
                });
            })
        });
    </script>

    @* Cursor mouse *@
    <style>
        tr[data-href] {
            cursor: pointer;
        }
    </style>


</body>
</html>
